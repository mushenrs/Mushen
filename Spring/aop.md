面向切面编程(Aspect-Oriented Programming)
横切关注点从概念上是与应用的业务逻辑相分离的,可以被模块化为特殊的类,这些类被称为切面(aspect).
#### AOP的术语
1.通知(Advice)
切面的工作称为通知(Advice),通知定义了切面是什么以及何时使用.Spring切面可以应用5种类型的通知:
* 前置通知(Before):在目标方法被调用之前调用通知;
* 后置通知(After):在目标方法完成之后调用通知,此时不会关心方法的输出是什么;
* 返回通知(After-returning):在目标方法成功执行之后调用通知;
* 异常通知(After-throwing):在目标方法抛出异常后调用通知;
* 环绕通知(Around):通知包裹了被通知的方法,在被通知的方法调用之前和之后执行自定义的行为.
2.连接点(Join point)
连接点是在应用执行过程中能够插入切面的一个点,这个点可以是调用方法时,抛出异常时,甚至是修改一个字段时.
3.切点(Poincut)
切点定义了何处,切点的定义会匹配通知所要织入的一个或多个连接点,有助于缩小切面所通知的连接点的范围.
通常使用明确的类和方法名称,或是利用正则表达式定义所匹配的类和方法名称来指定这些切点.
4.切面(Aspect)
切面是通知和切点的结合,通知和切点共同定义了切面的全部内容--它是什么,在何时和何处完成其功能.
5.引入(Introduction)
引入允许我们向现有的类添加新方法或属性.
6.织入(Weaving)
织入是把切面应用到目标对象并创建新的代理对象的过程,切面在指定的连接点被织入到目标对象中,在目标对象的生命周期里有多个点可以进行织入:
* 编译期:切面在目标类编译时织入,这种方式需要特殊的编译器;
* 类加载期:切面在目标类加载到JVM时被织入,这种方式需要特殊的类加载器(ClassLoader).
* 运行期:切面在应用运行的某个时刻被织入,一般情况下,在织入切面时,AOP容器会为目标对象动态地创建一个代理对象.

#### Spring对AOP的支持
Spring提供了四种类型的AOP支持:
* 基于代理的经典Spring AOP
* 纯POJO切面
* @AspectJ注解驱动的切面
* 注入式AspectJ切面
前三种是Spring AOP实现的变体,Spring AOP构建在动态代理基础之上,在运行时通知对象,只支持方法级别的连接点.如果超过了简单的方法调用, 那么需要考虑使用第四种方式使用AspectJ来实现切面.


